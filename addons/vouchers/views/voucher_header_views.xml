<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Voucher Header Tree View -->
    <record id="view_voucher_header_tree" model="ir.ui.view">
        <field name="name">kst.voucher.header.tree</field>
        <field name="model">kst.voucher.header</field>
        <field name="arch" type="xml">
            <tree string="Vouchers">
                <field name="voucher_date"/>
                <field name="voucher_code"/>
                <field name="payee_id"/>
                <field name="check_amount" sum="Total Amount"/>
                <field name="is_posted"/>
            </tree>
        </field>
    </record>

    <!-- Voucher Header Form View -->
    <record id="view_voucher_header_form" model="ir.ui.view">
        <field name="name">kst.voucher.header.form</field>
        <field name="model">kst.voucher.header</field>
        <field name="arch" type="xml">
            <form string="Voucher">
                <header>
                    <field name="is_posted" widget="boolean_toggle"/>
                </header>
                <sheet>
                    <group>
                        <group string="Voucher Information">
                            <field name="prefix_id" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            <field name="voucher_number" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            <field name="voucher_code" readonly="1"/>
                            <field name="voucher_date" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                        </group>
                        <group string="Classification">
                            <field name="expense_id" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            <field name="bank_id" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            <field name="kcode_id" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                        </group>
                    </group>
                    <group>
                        <group string="Payee Information">
                            <field name="payee_id" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                        </group>
                        <group string="Check Information">
                            <field name="check_name" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            <field name="check_date" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            <field name="check_number" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            <field name="check_amount" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                        </group>
                    </group>
                    <group>
                        <group string="Period Covered">
                            <field name="period_from" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            <field name="period_to" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                        </group>
                        <group string="Additional Fields">
                            <field name="compute" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Voucher Details">
                            <field name="detail_ids" attrs="{'readonly': [('is_posted', '=', True)]}">
                                <tree editable="bottom">
                                    <field name="account_number"/>
                                    <field name="account_name"/>
                                    <field name="bill_due"/>
                                    <field name="pay_due"/>
                                    <field name="consumption"/>
                                    <field name="period_from"/>
                                    <field name="period_to"/>
                                    <field name="remarks"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Notes">
                            <group>
                                <field name="particulars" placeholder="Enter particulars..." nolabel="1" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            </group>
                            <group>
                                <field name="remarks" placeholder="Enter remarks..." nolabel="1" attrs="{'readonly': [('is_posted', '=', True)]}"/>
                            </group>
                        </page>
                    </notebook>
                    <group>
                        <group string="Audit Trail">
                            <field name="create_uid" string="Created By" readonly="1"/>
                            <field name="create_date" string="Created Date" readonly="1"/>
                            <field name="write_uid" string="Modified By" readonly="1"/>
                            <field name="write_date" string="Modified Date" readonly="1"/>
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

    <!-- Voucher Header Search View -->
    <record id="view_voucher_header_search" model="ir.ui.view">
        <field name="name">kst.voucher.header.search</field>
        <field name="model">kst.voucher.header</field>
        <field name="arch" type="xml">
            <search string="Search Vouchers">
                <field name="voucher_code"/>
                <field name="voucher_number"/>
                <field name="payee_id"/>
                <field name="check_number"/>
                <filter string="Posted" name="filter_posted" domain="[('is_posted', '=', True)]"/>
                <filter string="Draft" name="filter_draft" domain="[('is_posted', '=', False)]"/>
                <filter string="Payee" name="group_by_payee" context="{'group_by': 'payee_id'}"/>
                <filter string="Expense" name="group_by_expense" context="{'group_by': 'expense_id'}"/>
            </search>
        </field>
    </record>

    <!-- Voucher Header Action -->
    <record id="action_voucher_header" model="ir.actions.act_window">
        <field name="name">Vouchers</field>
        <field name="res_model">kst.voucher.header</field>
        <field name="view_mode">tree,form</field>
    </record>

    <!-- Menu Structure -->
    <menuitem id="menu_vouchers_root" name="Vouchers" sequence="30"/>
    
    <menuitem id="menu_vouchers_vouchers" name="Vouchers" parent="menu_vouchers_root" sequence="10"/>
    <menuitem id="menu_voucher_header" name="Voucher List" parent="menu_vouchers_vouchers" action="action_voucher_header" sequence="10"/>
    
    <menuitem id="menu_vouchers_masterfiles" name="Masterfiles" parent="menu_vouchers_root" sequence="20"/>
    <menuitem id="menu_expense_category" name="Expense Categories" parent="menu_vouchers_masterfiles" action="action_expense_category" sequence="10"/>
    <menuitem id="menu_expense" name="Expenses" parent="menu_vouchers_masterfiles" action="action_expense" sequence="20"/>
    <menuitem id="menu_payee" name="Payees" parent="menu_vouchers_masterfiles" action="action_payee" sequence="30"/>
    <menuitem id="menu_voucher_prefix" name="Voucher Prefixes" parent="menu_vouchers_masterfiles" action="action_voucher_prefix" sequence="40"/>
</odoo>

